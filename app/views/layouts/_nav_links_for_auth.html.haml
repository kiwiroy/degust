- if user_signed_in?
  %li.dropdown
    %a.dropdown-toggle{"data-toggle"=>"dropdown","role"=>"button","aria-haspopup"=>"true", "aria-expanded"=>"false" }
      = current_user.name
      .caret
    %ul.dropdown-menu
      %li
        = link_to 'Your data', visited_path
      = render 'layouts/ui_versions'
      %li
        = link_to 'Upload new', upload_path
      %li
        = link_to "Sign out", signout_path
- else
  - if defined? as_button
    %button.btn.btn-default.dropdown-toggle{"type"=>"button", "data-toggle"=>"dropdown","role"=>"button","aria-haspopup"=>"true", "aria-expanded"=>"false" }
      Sign in
      .caret
    %ul.dropdown-menu
      = render 'layouts/ui_versions'
      - if ENV.include?("TWITTER_PROVIDER_KEY")
        %li
          = link_to "Via Twitter", "/auth/twitter"
      - if ENV.include?("GOOGLE_PROVIDER_KEY")
        %li
          = link_to "Via Google", "/auth/google_oauth2"
      - if ENV.include?("GITHUB_PROVIDER_KEY")
        %li
          = link_to "Via GitHub", "/auth/github"
      - if ENV.include?("LDAP_PROVIDER_NAME")
        %li
          = link_to "Via GitHub", "/auth/ldap"
  - else
    %li.dropdown
      %a.dropdown-toggle{"data-toggle"=>"dropdown","role"=>"button","aria-haspopup"=>"true", "aria-expanded"=>"false" }
        Sign in
        .caret
      %ul.dropdown-menu
        = render 'layouts/ui_versions'
        - if ENV.include?("TWITTER_PROVIDER_KEY")
          %li
            = link_to "Via Twitter", "/auth/twitter"
        - if ENV.include?("GOOGLE_PROVIDER_KEY")
          %li
            = link_to "Via Google", "/auth/google_oauth2"
        - if ENV.include?("GITHUB_PROVIDER_KEY")
          %li
            = link_to "Via GitHub", "/auth/github"
        - if ENV.include?("LDAP_PROVIDER_NAME")
          %li
            = link_to "Via GitHub", "/auth/ldap"
